{% extends "base.html" %}
{% load static %}

{% block main %}
{# Main content for the Homepage starts here. #}

{# START: Hero Area Slider #}
<section class="hero-area">
    <div class="hero-post-slides owl-carousel">
        <div class="single-hero-post bg-overlay">
            <div class="slide-img bg-img" style="background-image:url({% static 'img/bg-img/1.jpg' %});"></div>
            <div class="container h-100">
                <div class="row h-100 align-items-center">
                    <div class="col-12">
                        <div class="hero-slides-content text-center">
                            <h2>Bring Nature Indoors</h2>
                            <p>Discover our curated collection of beautiful, healthy plants that will bring life and fresh air into your home or office.</p>
                            <div class="welcome-btn-group">
                                <a href="{% url 'shop' %}" class="btn leafcart-btn mr-30">GO TO SHOP</a>
                                <a href="{% url 'contact' %}" class="btn leafcart-btn active">CONTACT US</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="single-hero-post bg-overlay">
            <div class="slide-img bg-img" style="background-image: url({% static 'img/bg-img/2.jpg' %});"></div>
            <div class="container h-100">
                <div class="row h-100 align-items-center">
                    <div class="col-12">
                        <div class="hero-slides-content text-center">
                            <h2>Expert Care, Thriving Plants</h2>
                            <p>From rare finds to timeless classics, each plant is nurtured with expert care to ensure it thrives in its new home.</p>
                            <div class="welcome-btn-group">
                                <a href="{% url 'shop' %}" class="btn leafcart-btn mr-30">GO TO SHOP</a>
                                <a href="{% url 'contact' %}" class="btn leafcart-btn active">CONTACT US</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{# END: Hero Area Slider #}


{# START: Featured Categories Section (NEW DESIGN) #}
<section class="featured-categories-area section-padding-100-0">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="section-heading text-center">
                    <h2>SHOP BY CATEGORY</h2>
                </div>
            </div>
        </div>
        <div class="row justify-content-center">
            {% for category in featured_categories %}
            <div class="col-12 col-sm-6 col-lg-4">
                <a href="{% url 'shop' %}?categories={{ category.id }}">
                    <div class="single-category-card mb-100">
                        <div class="category-image">
                            <img src="{{ category.image.url }}" alt="{{ category.name }}">
                        </div>
                        <div class="category-title">
                            <h5>{{ category.name }}</h5>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{# END: Featured Categories Section #}


{# START: New Arrivals Section #}
<section class="new-arrivals-products-area bg-gray section-padding-100">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="section-heading text-center">
                    <h2>NEW ARRIVALS</h2>
                    <p>We have the latest products, it must be exciting for you</p>
                </div>
            </div>
        </div>
        <div class="row">
            {% if new_arrivals %}
                {% for product in new_arrivals %}
                <div class="col-12 col-sm-6 col-lg-3">
                    <div class="single-product-area mb-50 wow fadeInUp" data-wow-delay="100ms">
                        <div class="product-card">
                            <div class="product-image-container">
                                <a href="{% url 'shop_details' product.id %}">
                                    {% if product.images.all.0 %}
                                        <img src="{{ product.images.all.0.image.url }}" alt="{{ product.name }}">
                                    {% else %}
                                        <img src="{% static 'img/no-image.png' %}" alt="No Image Available">
                                    {% endif %}
                                </a>
                            </div>
                            <div class="product-card-body">
                                <a href="{% url 'shop_details' product.id %}" class="product-name"><h5>{{ product.name }}</h5></a>
                                <p class="product-price">â‚¹{{ product.price|floatformat:2 }}</p>
                                {% if product.stock > 0 %}
                                    <form action="{% url 'add_to_cart' product.id %}" method="post">
                                        {# FIX: Removed extra <> brackets #}
                                        {% csrf_token %}
                                        <input type="hidden" name="quantity" value="1">
                                        <button type="submit" class="btn leafcart-btn btn-sm w-100"><i class="fa fa-shopping-cart"></i> Add to Cart</button>
                                    </form>
                                {% else %}
                                    <button type="button" class="btn leafcart-btn btn-sm w-100" disabled style="background-color:#a0a0a0;border-color:#a0a0a0;">Out of Stock</button>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="col-12"><p class="text-center">No new products to display.</p></div>
            {% endif %}
            <div class="col-12 text-center">
                <a href="{% url 'shop' %}" class="btn leafcart-btn">View All Products</a>
            </div>
        </div>
    </div>
</section>
{# END: New Arrivals Section #}


{# START: Why Choose Us Section #}
<section class="our-services-area section-padding-100-0">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="section-heading text-center">
                    <h2>WHY CHOOSE US?</h2>
                </div>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-12 col-md-6 col-lg-4">
                <div class="single-benefits-area text-center mb-100">
                    <img src="{% static 'img/core-img/b1.png' %}" alt="">
                    <h5>Quality Guarantee</h5>
                    <p>Every plant is hand-selected and inspected to ensure it meets our high standards of quality.</p>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
                <div class="single-benefits-area text-center mb-100">
                    <img src="{% static 'img/core-img/b2.png' %}" alt="">
                    <h5>Expert Support</h5>
                    <p>Our knowledgeable staff is always here to help you with your plant care questions and needs.</p>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
                <div class="single-benefits-area text-center mb-100">
                    <img src="{% static 'img/core-img/b3.png' %}" alt="">
                    <h5>Sustainable Sourcing</h5>
                    <p>We source our plants from sustainable growers and use organic, peat-free soil mixes.</p>
                </div>
            </div>
        </div>
    </div>
</section>
{# END: Why Choose Us Section #}


{# Testimonial Section has been removed as requested #}


<style>
    /* New Category Card Styles */
    .single-category-card { 
        border: 1px solid #ebebeb; 
        border-radius: 8px; 
        overflow: hidden; 
        transition: box-shadow 0.3s ease, transform 0.3s ease; 
        background-color: #fff;
    }
    .single-category-card:hover { 
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); 
        transform: translateY(-5px); 
    }
    .category-image { 
        height: 250px; 
        overflow: hidden; 
    }
    .category-image img { 
        width: 100%; 
        height: 100%; 
        object-fit: cover; 
    }
    .category-title { 
        padding: 20px; 
        text-align: center; 
        border-top: 1px solid #ebebeb; 
    }
    .category-title h5 { 
        margin: 0; 
        font-weight: 600; 
        color: #2a2a2a; 
    }

    /* Product Card Styles */
    .product-card{background:#fff;border:1px solid #ebebeb;border-radius:8px;overflow:hidden;transition:box-shadow .3s ease,transform .3s ease;display:flex;flex-direction:column;height:100%}.product-card:hover{box-shadow:0 8px 25px rgba(0,0,0,.1);transform:translateY(-5px)}.product-image-container{height:220px;overflow:hidden}.product-image-container img{width:100%;height:100%;object-fit:cover;transition:transform .4s ease}.product-card:hover .product-image-container img{transform:scale(1.05)}.product-card-body{padding:20px;text-align:center;flex-grow:1;display:flex;flex-direction:column}.product-name h5{font-size:1rem;font-weight:600;margin-bottom:10px;color:#2a2a2a;transition:color .3s ease}.product-name:hover h5{color:#70c745}.product-price{font-size:1.1rem;font-weight:700;color:#70c745;margin-bottom:15px;margin-top:auto}.product-card-body .btn{margin-top:10px}
</style>

{% endblock main %}